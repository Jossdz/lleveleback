(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{199:function(e,t,a){e.exports=a(365)},365:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(14),u=a.n(l),s=a(59),i=a(36),o=a(8),m=a.n(o),p=a(21),d=a(35),f=a(366),E=a(375),h=a(380),b=a(381),v=a(382),y=a(383),g=a(384),w=a(385),x=a(386),j=a(387),O=a(66),k=a.n(O);n="/auth";var I=k.a.create({withCredentials:!0,baseURL:n}),C=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/signup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/profile");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=Object(r.createContext)();function D(e){var t=e.children,a=Object(r.useState)(null),n=Object(d.a)(a,2),l=n[0],u=n[1],s=function(e){return u(e)};return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,a=t.data.user,s(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(P.Provider,{value:{user:l,setCtxUser:s,clearCtxUser:function(){return u(null)}}},t)}var L=f.a.Header,N=f.a.Sider,_=f.a.Content;var U,A=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(d.a)(a,2),l=n[0],u=n[1],i=Object(r.useContext)(P),o=i.clearCtxUser,O=i.user,k=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:o();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(f.a,{style:{height:"100vh"}},c.a.createElement(N,{trigger:null,collapsible:!0,collapsed:l},c.a.createElement("div",{className:"logo"}),c.a.createElement(E.a,{theme:"dark",mode:"inline"},c.a.createElement(E.a.Item,{key:"1",icon:c.a.createElement(h.a,null)},c.a.createElement(s.b,{to:"/"},"Home")),!O&&c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a.Item,{key:"2",icon:c.a.createElement(b.a,null)},c.a.createElement(s.b,{to:"/signup"},"Signup")),c.a.createElement(E.a.Item,{key:"3",icon:c.a.createElement(v.a,null)},c.a.createElement(s.b,{to:"/login"},"Login"))),O&&c.a.createElement(E.a.Item,{key:"4",icon:c.a.createElement(y.a,null)},c.a.createElement(s.b,{to:"/restaurant/new"},"New Restaurant")),O&&c.a.createElement(E.a.Item,{key:"5",icon:c.a.createElement(g.a,null),onClick:k},"Logout"),O&&c.a.createElement(E.a.Item,{key:"6",icon:c.a.createElement(w.a,null)},c.a.createElement(s.b,{to:"/profile"},O.name)))),c.a.createElement(f.a,{className:"site-layout"},c.a.createElement(L,{style:{padding:"0 1rem",backgroundColor:"white"}},c.a.createElement(l?x.a:j.a,{className:"trigger",onClick:function(){u(!l)}})),c.a.createElement(_,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},t)))};U="/api/restaurants";var M=k.a.create({withCredentials:!0,baseURL:U}),R=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("/",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=a(368),H=a(370),V=a(93),$=a(65),J=a(371),W=a(376),X=a(388),z=B.a.Meta,Y=H.a.Title;var K=function(){var e=Object(r.useState)(null),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,a=t.data.restaurants,n(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a?c.a.createElement(c.a.Fragment,null,c.a.createElement(Y,{level:1},"Restaurants"),c.a.createElement(V.a,{gutter:[16,16]},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement($.a,{sm:24,md:12,lg:8},c.a.createElement(B.a,{actions:[c.a.createElement(s.b,{to:"/restaurant/".concat(e._id)},c.a.createElement(X.a,{key:"more"}))]},c.a.createElement(J.a,{loading:!a,avatar:!0,active:!0},c.a.createElement(z,{avatar:c.a.createElement(W.a,{src:e.image,style:{width:"45px",height:"45px"}}),title:e.name,description:e.description}))))})))):c.a.createElement(B.a,{style:{width:300,marginTop:16},actions:[c.a.createElement(X.a,{key:"more"})]},c.a.createElement(J.a,{loading:!0,avatar:!0,active:!0},c.a.createElement(z,{avatar:c.a.createElement(W.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:"Card title",description:"This is the description"})))};var Q,Z=function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Not found"))},ee=a(369),te=a(377),ae=a(76),ne=function(e){var t=e.history,a=ee.a.useForm(),n=Object(d.a)(a,1)[0];function r(){return(r=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(a);case 2:t.push("/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement(ee.a,{layout:"vertical",name:"basic",form:n,onFinish:function(e){return r.apply(this,arguments)}},c.a.createElement(ee.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(te.a,null)),c.a.createElement(ee.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(te.a.Password,null)),c.a.createElement(ee.a.Item,null,c.a.createElement(ae.a,{type:"primary",htmlType:"submit"},"Submit"))))},re=a(367);Q="https://murmuring-reaches-95521.herokuapp.com";var ce,le=function(e){e.history;var t=ee.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useContext)(P).setCtxUser;function l(){return(l=Object(p.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:a=e.sent,delete(r=a.data.user).password,delete r.hash,delete r.salt,n(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement(ee.a,{layout:"vertical",name:"basic",form:a,onFinish:function(e){return l.apply(this,arguments)}},c.a.createElement(ee.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(te.a,null)),c.a.createElement(ee.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(te.a.Password,null)),c.a.createElement(ee.a.Item,null,c.a.createElement(ae.a,{type:"primary",htmlType:"submit"},"Login"))),c.a.createElement(re.a,null,"Or"),c.a.createElement("br",null),c.a.createElement(V.a,{gutter:16},c.a.createElement($.a,{span:12},c.a.createElement(ae.a,{type:"primary",block:!0},c.a.createElement("a",{href:"".concat(Q,"/auth/facebook")},"Login with Facebook"))),c.a.createElement($.a,{span:12},c.a.createElement(ae.a,{danger:!0,type:"primary",block:!0},c.a.createElement("a",{href:"".concat(Q,"/auth/google")},"Login with Google")))))},ue=a(374),se=a(379),ie=a(373),oe=a(92),me=a(195),pe=a(372),de=a(378);ce="/api/dish";var fe=k.a.create({withCredentials:!0,baseURL:ce}),Ee=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.post("/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=pe.a.Option,ve=function(e){var t=e.restaurantId,a=e.setnewDish,n=ee.a.useForm(),l=Object(d.a)(n,1)[0],u=Object(r.useState)([]),s=Object(d.a)(u,2),i=s[0],o=s[1],f=Object(r.useState)(null),E=Object(d.a)(f,2),h=E[0],b=E[1];function v(){return(v=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,Ee(t,Object(oe.a)(Object(oe.a)({},n),{},{photo:h}));case 3:a(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(p.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","restaurants-app"),e.next=6,k.a.post("https://api.cloudinary.com/v1_1/joss/image/upload",n);case 6:r=e.sent,c=r.data.secure_url,b(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement(ee.a,{layout:"vertical",form:l,onFinish:function(e){return v.apply(this,arguments)}},c.a.createElement(ee.a.Item,{name:"name",label:"Name"},c.a.createElement(te.a,null)),c.a.createElement(ee.a.Item,{name:"price",label:"Price"},c.a.createElement(de.a,{min:1,defaultValue:1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})),c.a.createElement("input",{type:"file",onChange:function(e){return y.apply(this,arguments)}}),c.a.createElement(ee.a.Item,{name:"ingredients",label:"Ingredients"},c.a.createElement(pe.a,{mode:"tags",style:{width:"100%"},placeholder:"Ingredients",name:"ingredients",onChange:function(e){o([].concat(Object(me.a)(i),[e]))}},i.map((function(e,t){return c.a.createElement(be,{key:t,value:e},e)})))),c.a.createElement(ee.a.Item,{name:"foodType",label:"Food Type"},c.a.createElement(pe.a,{style:{width:"100%"},placeholder:"Food Type",name:"foodType"},c.a.createElement(be,{value:"DESSERT"},"Dessert"),c.a.createElement(be,{value:"VEGAN"},"Vegan"),c.a.createElement(be,{value:"GLUTENFREE"},"Glutenfree"),c.a.createElement(be,{value:"MEAT"},"Meat"))),c.a.createElement(ae.a,{type:"primary",block:!0,htmlType:"submit",disabled:!h},"Add dish"))},ye=H.a.Title,ge=H.a.Text,we=B.a.Meta,xe=function(e){var t=e.match.params.restaurantId,a=Object(r.useState)(null),n=Object(d.a)(a,2),l=n[0],u=n[1],i=Object(r.useState)(!1),o=Object(d.a)(i,2),f=o[0],E=o[1],h=Object(r.useState)(!1),b=Object(d.a)(h,2),v=b[0],y=b[1],g=Object(r.useContext)(P).user;return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:a=e.sent,n=a.data.restaurant,u(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),E(!1)}),[v,t]),l?c.a.createElement(V.a,{gutter:[16,16]},c.a.createElement($.a,{span:24},c.a.createElement(ue.a,{src:l.image,style:{width:"100%"}})),c.a.createElement($.a,{span:24},c.a.createElement(ye,{level:1},l.name)),c.a.createElement($.a,{span:24},c.a.createElement(ge,{type:"secondary"},l.description)),(null===g||void 0===g?void 0:g._id)===l.owner&&c.a.createElement($.a,{span:24},c.a.createElement(ae.a,{block:!0,onClick:function(){return E(!0)}},"Add Dish")),c.a.createElement($.a,{span:24},c.a.createElement(ye,{level:3},"Menu:")),l.dishes.map((function(e){return c.a.createElement($.a,{key:e._id,sm:24,md:12,lg:8},c.a.createElement(B.a,{actions:[c.a.createElement(s.b,{to:"/dish/".concat(e._id)},c.a.createElement(X.a,null))],hoverable:!0,cover:c.a.createElement("img",{alt:"menu-item",src:e.photo,height:150,style:{objectFit:"cover"}})},c.a.createElement(we,{title:e.name,description:c.a.createElement(c.a.Fragment,null,c.a.createElement("b",null,"$",e.price,".00"),c.a.createElement("br",null),c.a.createElement("p",null,"Ingredients: "),c.a.createElement(V.a,{gutter:[10,10]},e.ingredients.map((function(e,t){return c.a.createElement($.a,{span:12,key:"ingredient-".concat(t)},c.a.createElement(se.a,null,e))}))))})))})),c.a.createElement(ie.a,{title:"Add a new dish",visible:f,onCancel:function(){return E(!1)},footer:[c.a.createElement(ae.a,{type:"dashed",danger:!0,onClick:function(){return E(!1)}},"Cancel")]},c.a.createElement(ve,{restaurantId:t,setnewDish:y}))):c.a.createElement("div",{style:{backgroundColor:"white",padding:"1rem"}},c.a.createElement(J.a,{active:!0}))},je=function(e){var t=e.history,a=ee.a.useForm(),n=Object(d.a)(a,1)[0],l=Object(r.useState)(null),u=Object(d.a)(l,2),s=u[0],i=u[1];function o(){return(o=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(Object(oe.a)(Object(oe.a)({},a),{},{image:s}));case 2:t.push("/");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(p.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","restaurants-app"),e.next=6,k.a.post("https://api.cloudinary.com/v1_1/joss/image/upload",n);case 6:r=e.sent,c=r.data.secure_url,i(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement(ee.a,{layout:"vertical",form:n,onFinish:function(e){return o.apply(this,arguments)}},c.a.createElement(ee.a.Item,{name:"name",label:"Name"},c.a.createElement(te.a,null)),c.a.createElement(ee.a.Item,{name:"description",label:"Description"},c.a.createElement(te.a.TextArea,null)),c.a.createElement(ee.a.Item,{name:"direction",label:"Direction"},c.a.createElement(te.a,null)),c.a.createElement("input",{type:"file",onChange:function(e){return f.apply(this,arguments)}}),c.a.createElement(ae.a,{type:"primary",htmlType:"submit",disabled:!s},"Create restaurant"))},Oe=H.a.Title,ke=function(e){var t=e.match.params.dishId,a=e.history,n=Object(r.useState)(null),l=Object(d.a)(n,2),u=l[0],s=l[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t);case 2:a=e.sent,n=a.data.dish,s(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),u?c.a.createElement(V.a,{gutter:[16,16]},c.a.createElement($.a,{span:24},c.a.createElement(ue.a,{src:u.photo})),c.a.createElement($.a,{span:24},c.a.createElement(Oe,{level:1},u.name)),c.a.createElement($.a,{span:24},c.a.createElement(Oe,{level:4},"Ingredients: ")),u.ingredients.map((function(e,t){return c.a.createElement($.a,{key:t,span:4},c.a.createElement(se.a,{color:"cyan"},e))})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement($.a,{span:24},c.a.createElement(ae.a,{block:!0,type:"primary",onClick:function(){return a.goBack()}},"Go back"))):c.a.createElement("div",{style:{backgroundColor:"white",padding:"1rem"}},c.a.createElement(J.a,{active:!0}))},Ie=function(){return c.a.createElement("h1",null,"EditMenu")},Ce=function(){return c.a.createElement("h1",null,"Profile")},Te=function(){return c.a.createElement(s.a,null,c.a.createElement(A,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:K}),c.a.createElement(i.a,{exact:!0,path:"/signup",component:ne}),c.a.createElement(i.a,{exact:!0,path:"/login",component:le}),c.a.createElement(i.a,{exact:!0,path:"/profile",component:Ce}),c.a.createElement(i.a,{exact:!0,path:"/editMenu/:restaurantId",component:Ie}),c.a.createElement(i.a,{exact:!0,path:"/restaurant/new",component:je}),c.a.createElement(i.a,{exact:!0,path:"/restaurant/:restaurantId",component:xe}),c.a.createElement(i.a,{exact:!0,path:"/dish/:dishId",component:ke}),c.a.createElement(i.a,{component:Z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(364);u.a.render(c.a.createElement(D,null,c.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[199,1,2]]]);
//# sourceMappingURL=main.f0f58776.chunk.js.map